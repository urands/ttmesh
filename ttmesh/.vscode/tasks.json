{
  // Build, run, and test tasks (debug/release)
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Build (Release)",
      "type": "shell",
      "command": "go build -ldflags \"-s -w\" ./...",
      "options": { "cwd": "${workspaceFolder}" },
      "group": { "kind": "build", "isDefault": true },
      "problemMatcher": ["$go"]
    },
    {
      "label": "Build (Debug)",
      "type": "shell",
      "command": "go build -gcflags=all=\"-N -l\" ./...",
      "options": { "cwd": "${workspaceFolder}" },
      "group": "build",
      "problemMatcher": ["$go"]
    },
    {
      "label": "Run Node (Release)",
      "type": "shell",
      "command": "go run -ldflags=\"-s -w\" ./cmd/ttmesh-node",
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": ["$go"],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "Run CLI (Release)",
      "type": "shell",
      "command": "go run -ldflags=\"-s -w\" ./cmd/ttmesh-ctl",
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": ["$go"],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "Test (Release)",
      "type": "shell",
      "command": "go test -v ./...",
      "options": { "cwd": "${workspaceFolder}" },
      "group": { "kind": "test", "isDefault": true },
      "problemMatcher": ["$go-test"]
    },
    {
      "label": "Test (Debug)",
      "type": "shell",
      "command": "go test -v -gcflags=all=\"-N -l\" ./...",
      "options": { "cwd": "${workspaceFolder}" },
      "group": "test",
      "problemMatcher": ["$go-test"]
    },
    {
      "label": "Proto Gen",
      "type": "shell",
      "command": "make proto",
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    }
  ]
}

